# 📹 摄像头图片服务

一个简单的摄像头图片服务，通过URL直接访问摄像头图像。

## 🚀 功能特性

- **简单直接**: 通过URL直接访问摄像头图片
- **多种格式**: 支持JPEG和PNG格式
- **多种URL**: 支持多种URL路径访问
- **局域网访问**: 支持局域网内其他设备访问

## 📋 系统要求

- Python 3.7+
- 摄像头设备（内置或外接）
- macOS/Linux/Windows

## 🛠️ 安装步骤

1. **安装依赖包**
   ```bash
   pip install -r requirements.txt
   ```

2. **运行程序**
   ```bash
   python main.py
   ```

## 🌐 访问地址

启动程序后，可以通过以下URL访问摄像头图片：

### 本地访问
- `http://localhost:5010/camera.jpg`
- `http://127.0.0.1:5010/camera.jpg`

### 局域网访问
- `http://[本机IP]:5010/camera.jpg`

例如：`http://192.168.1.100:5010/camera.jpg`

## 📡 支持的URL格式

| URL路径 | 格式 | 说明 |
|---------|------|------|
| `/camera.jpg` | JPEG | 标准JPEG格式 |
| `/camera.jpeg` | JPEG | JPEG格式 |
| `/camera.png` | PNG | PNG格式 |
| `/img` | JPEG | 简化路径 |
| `/image` | JPEG | 简化路径 |
| `/snapshot` | JPEG | 快照路径 |

## 🔧 配置选项

### 摄像头索引
默认使用摄像头索引0。如需使用其他摄像头：

```python
camera_stream = CameraStream(camera_index=1)  # 使用第二个摄像头
```

### 端口配置
默认端口为5010，可修改：

```python
app.run(host='0.0.0.0', port=8080, debug=False, threaded=True)
```

## 📱 使用场景

1. **直接访问**: 在浏览器中直接访问URL查看图片
2. **嵌入网页**: 将URL嵌入到其他网页中
3. **API调用**: 其他应用程序通过HTTP请求获取图片
4. **监控系统**: 作为监控系统的图像源

## 🛡️ 安全注意事项

- 程序绑定到 `0.0.0.0`，支持局域网访问
- 生产环境中建议配置防火墙规则
- 不要将程序暴露到公网环境

## 🔍 故障排除

### 摄像头无法打开
- 检查摄像头是否被其他程序占用
- 尝试不同的摄像头索引（0, 1, 2...）
- 确认摄像头驱动已正确安装

### 无法从局域网访问
- 检查防火墙设置
- 确保设备在同一局域网内
- 使用 `ping [IP地址]` 测试网络连通性

## 📝 代码结构

```
main.py
├── CameraStream类      # 摄像头管理
├── Flask应用          # Web服务器
├── 图片端点           # 图片访问接口
└── 主函数            # 程序入口
``` 